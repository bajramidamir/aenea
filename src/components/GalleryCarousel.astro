---
const images = [
  '/desktop-1.webp',
  '/mobile-1.webp',
  '/desktop-2.webp',
  '/mobile-2.webp',
  '/desktop-3.webp',
  '/mobile-3.webp',
  '/desktop-4.webp',
  '/mobile-4.webp',
  '/desktop-5.webp',
  '/mobile-5.webp',
  '/desktop-6.webp',
  '/mobile-6.webp',
  '/desktop-7.webp',
  '/mobile-7.webp',
];
---

<div
  class='p-4 sm:p-8 md:p-12 mb-12 bg-gray-100 rounded-2xl mx-4 sm:mx-8 md:mx-12'
>
  <div
    class='flex items-start justify-between cursor-pointer'
    id='accordion-toggle'
  >
    <h1 class='text-6xl sm:text-8xl'>Our Design Process</h1>
    <span
      id='accordion-icon'
      class='text-4xl transition-transform duration-300'
    >
      +
    </span>
  </div>

  <div
    id='accordion-content'
    class='mt-6 text-base sm:text-xl transition-all duration-300 overflow-hidden max-h-0 opacity-0'
  >
    <p>
      Our design process begins with a collaborative meeting to understand your
      vision, followed by research, wireframing, prototyping, and iterative
      feedback to ensure a user-centered, visually striking final product.
    </p>
  </div>
</div>

<div class='w-full py-8 px-4 sm:px-8 md:px-12'>
  <div class='relative mx-auto'>
    <!-- Carousel wrapper -->
    <div
      id='carousel'
      class='flex overflow-x-auto scroll-smooth snap-x snap-mandatory gap-6 no-scrollbar'
    >
      {
        images.map((src, i) => (
          <div class='snap-center shrink-0 w-[90%] sm:w-[50%] lg:w-1/3 flex justify-center'>
            <img
              src={src}
              alt={`Slide ${i + 1}`}
              class='rounded-2xl max-w-full'
            />
          </div>
        ))
      }
    </div>

    <!-- Navigation buttons -->
    <div class='flex justify-center mt-6 gap-4'>
      <button
        onclick='scrollGallery(-1)'
        class='group w-8 h-8 rounded-full border border-black flex items-center justify-center text-xl hover:bg-black hover:text-white transition'
        aria-label='Scroll left'
      >
        <img
          src='/arrow-left.svg'
          alt='Scroll left'
          class='group-hover:invert'
        />
      </button>
      <button
        onclick='scrollGallery(1)'
        class='group w-8 h-8 rounded-full border border-black flex items-center justify-center text-xl hover:bg-black hover:text-white transition'
        aria-label='Scroll right'
      >
        <img
          src='/arrow-right.svg'
          alt='Scroll right'
          class='group-hover:invert'
        />
      </button>
    </div>
  </div>

  <!-- Script to scroll 1 item at a time -->
  <script is:inline>
    const scrollGallery = (dir) => {
      const carousel = document.getElementById('carousel');
      const child = carousel.querySelector('div');
      const scrollAmount = child.offsetWidth + 24; // 24px = gap-6
      carousel.scrollBy({ left: dir * scrollAmount, behavior: 'smooth' });
    };
  </script>
</div>

<script>
  const toggle = document.getElementById('accordion-toggle');
  const content = document.getElementById('accordion-content');
  const icon = document.getElementById('accordion-icon');

  if (toggle && content && icon) {
    toggle.addEventListener('click', () => {
      const isOpen = content.classList.contains('max-h-0');

      if (isOpen) {
        content.classList.remove('max-h-0', 'opacity-0');
        content.classList.add('max-h-[300px]', 'opacity-100');
        icon.classList.add('rotate-45');
      } else {
        content.classList.add('max-h-0', 'opacity-0');
        content.classList.remove('max-h-[300px]', 'opacity-100');
        icon.classList.remove('rotate-45');
      }
    });
  }
</script>
